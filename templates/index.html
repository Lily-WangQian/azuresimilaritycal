<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document Similarity Calculator</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Document Similarity Calculator</h1>

    <form action="/compare" method="post" enctype="multipart/form-data">
        <label>Upload 2-10 PDF files:</label><br><br>
        <input type="file" name="files" multiple required accept=".pdf">
        <br><br>
        <button type="submit">Compare Documents</button>
    </form>

    {% if error %}
    <div style="color: red; text-align: center; margin-top: 20px;">
        <strong>{{ error }}</strong>
    </div>
    {% endif %}

    {% if results %}
    <hr>
    <h2>Pairwise Similarity Scores</h2>
    <table border="1">
        <tr>
            <th>File 1</th>
            <th>File 2</th>
            <th>Similarity</th>
        </tr>
        {% for result in results %}
        <tr>
            <td>{{ result.file1 }}</td>
            <td>{{ result.file2 }}</td>
            <td>{{ result.similarity }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    {% if keyword_results %}
    <hr>
    <h2>TF-IDF & Contextual Keywords</h2>
    <table border="1">
        <tr>
            <th>File Name</th>
            <th>TF-IDF Keywords</th>
            <th>Contextual Keywords</th>
        </tr>
        {% for item in keyword_results %}
        <tr>
            <td>{{ item.filename }}</td>
            <td>{{ item.tfidf_keywords | join(', ') }}</td>
            <td>{{ item.contextual_keywords | join(', ') }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    {% if summary_results %}
    <hr>
    <h2>Document Summaries</h2>
    <table border="1">
        <tr>
            <th>File</th>
            <th>Summary</th>
        </tr>
        {% for item in summary_results %}
        <tr>
            <td>{{ item.filename }}</td>
            <td>{{ item.summary }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</body>
</html>
